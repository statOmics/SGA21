<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Koen Van den Berge" />


<title>Introduction to sequencing: Sequencing technology and preprocessing of sequencing data</title>

<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<script src="site_libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>





<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">SGA21</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-chalkboard-teacher"></span>
     
    Lectures
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="./docs/intro.pdf">1.1 Position</a>
    </li>
    <li>
      <a href="recapGeneralLinearModel.html">1.2 Recap linear model</a>
    </li>
    <li>
      <a href="./docs/martens_proteomics_bioinformatics.pdf">2.1 PDA - identification</a>
    </li>
    <li>
      <a href="pda_quantification_preprocessing.html">2.2 PDA- Quantification - Preprocessing</a>
    </li>
    <li>
      <a href="pda_robustSummarisation_peptideModels.html">2.2 PDA - Wrap-up Preprocessing - Peptide-Level-Models</a>
    </li>
    <li>
      <a href="pda_quantification_inference.html">2.3 PDA - Quantification - Differential Abundance Analysis</a>
    </li>
    <li>
      <a href="pda_blocking_wrapup.html">2.3 PDA - Wrap-up DA - Blocking</a>
    </li>
    <li>
      <a href="technicalDetailsProteomics.html">2.4. PDA - DA Technical Details</a>
    </li>
    <li>
      <a href="./docs/stagewiseTesting.pdf">2.5 PDA - Stage-wise testing</a>
    </li>
    <li>
      <a href="sequencing_intro.html">3.1 SDA - Intro to sequencing</a>
    </li>
    <li>
      <a href="sequencing_countData.html">3.2 SDA - Working with count data</a>
    </li>
    <li>
      <a href="sequencing_rnaseqIntro.html">3.3 SDA - Intro to RNA-seq analysis</a>
    </li>
    <li>
      <a href="sequencing_technicalDE.html">3.4 SDA - Technical topics in DE analysis</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-laptop"></span>
     
    tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="multipleRegression_KPNA2.html">1 Intro KPNA2</a>
    </li>
    <li>
      <a href="https://www.compomics.com/bioinformatics-for-proteomics/">2.1 Identification</a>
    </li>
    <li>
      <a href="pda_tutorialPreprocessing.html">2.2 DA - Preprocessing</a>
    </li>
    <li>
      <a href="pda_tutorialDesign.html">2.3 DA - Design</a>
    </li>
    <li>
      <a href="sequencing_preprocessing.sh">3.1 Preprocessing</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Introduction to sequencing: Sequencing technology and preprocessing of sequencing data</h1>
<h4 class="author">Koen Van den Berge</h4>
<h4 class="date">Last compiled on 04 November, 2021</h4>

</div>


<div id="the-study-of-gene-expression" class="section level1">
<h1><span class="header-section-number">1</span> The study of gene expression</h1>
<ul>
<li>The first part of this course focussed on proteomics, studying the concentration of proteins in biological samples. We have seen that identification of proteins and measuring their respective concentrations are extremely challenging, leading to many technological and statistical challenges in order to interpret these data.</li>
<li>In the second part of the course, we will focus on measuring gene expression, i.e., measuring the concentration of mRNA molecules, that may eventually be translated into proteins, but may also have functions on their own.</li>
</ul>
</div>
<div id="sequencing-technology" class="section level1">
<h1><span class="header-section-number">2</span> Sequencing technology</h1>
<ul>
<li>Measuring mRNA molecules typically happens through sequencing.</li>
<li>The technology continues to evolve at an incredible speed. The data output of so-called `next generation’ sequencing machines has more than doubled each year! Simultaneously, the cost of sequencing (in terms of $ per Gigabase) is dropping. Each year, we’re able to sequence more for less money, providing more information, as well as also computational and statistical challenges.</li>
<li>This tremendous technological revolution has revolutionized biology, and genomic sequencing is now a core component of the modern-day biologist’s toolkit.</li>
<li>The large majority of sequencing data is generated using sequencing-by-synthesis using machines produced by the company Illumina. While new players such as Pacific Biosciences and Oxford Nanopore have entered the scene, these are typically most useful for (but not limited to) DNA sequencing rather than gene expression studies, owing to their capability of sequencing long molecules.</li>
</ul>
<div class="figure">
<img src="images_sequencing/seqTechnology_throughput.png" alt="Figure: The data output revolution of sequencing machines. Image from Illumina documentation." width="698" />
<p class="caption">
Figure: The data output revolution of sequencing machines. Image from Illumina documentation.
</p>
</div>
<div id="the-sequencing-workflow" class="section level2">
<h2><span class="header-section-number">2.1</span> The sequencing workflow</h2>
<p>Library preparation steps:</p>
<ol style="list-style-type: decimal">
<li>First, the biological <strong>samples of interest are collected</strong>. Owing to the maturity of different protocols for sequencing, several types of biological input samples are amenable to sequencing, such as frozen tissues or FFPE-preserved samples.</li>
<li>The <strong>(m)RNA molecules from our sample are captured</strong>. This typically involves cell lysis in order to release the (m)RNA molecules from within the cells. The mRNA molecules are most often captured using (i) polyA-capture to select for polyadenylated RNA, or (ii) ribosomal depletion, where ribosomal and transfer RNAs are depleted, and so also non-polyA-mRNA molecules may be captured, such as long non-coding RNAs. In the case of `targeted sequencing’, where relevant molecules are of main interest (e.g., a gene panel), these targets can be specifically targeted in this step.</li>
<li><strong>Fragmentation</strong> of captured molecules. The captured molecules are fragmented, either chemically or mechanically. The appropriate size of fragments depends on the sequencing machines, but is often in the range of 300 - 500bp.</li>
<li><strong>Reverse transcription</strong>. Current dominant sequencing machines only sequence double-stranded DNA molecules. Therefore, in order to measure single-stranded mRNA, we must first reverse transcribe these molecules to a double-stranded complementary (cDNA) molecule.</li>
<li><strong>Adapter ligation</strong>. Adapters are oligonucleotides (short sequences of nucleotides) that are platform-specific sequences for fragment recognition by the sequencing machines. These are added either to the 3’ or 5’ end of the cDNA molecules or used as primers in the reverse transcription reaction. The final cDNA library consists of cDNA inserts flanked by an adapter sequence on each end.</li>
<li><strong>PCR amplification</strong>. To increase concentration, several PCR reaction cycles are performed.</li>
<li>Loading the amplified cDNA library on the <strong>sequencing</strong> machine. Find out how sequencing-by-synthesis works through <a href="https://www.youtube.com/watch?v=fCd6B5HRaZ8">this video</a>. Note that the video shows paired-end sequencing, where a number of basepairs are sequenced at each end of the fragment. All previous steps together are described as `sample prep’ in that video.</li>
</ol>
<div class="figure">
<img src="images_sequencing/seqWorkflow1_clean.png" alt="Figure: The sequencing workflow. Image adapted from Van den Berge et al. (2019)." width="822" />
<p class="caption">
Figure: The sequencing workflow. Image adapted from Van den Berge et al. (2019).
</p>
</div>
<p>Note that several variants of library preparation protocols are available. The most important ones are:</p>
<ul>
<li>Single-end vs paired-end sequencing: In single-end sequencing, a single end (3’ or 5’) of the cDNA fragment is sequenced. In paired-end sequencing, both ends are sequenced, and depending on the size of the fragment, the reads may or may not overlap.</li>
<li>Strand-specific protocols: Some library preparation protocols allow measuring strand specificity, where the strand information (i.e., sense/antisense) of each read can be preserved.</li>
</ul>
</div>
<div id="the-sequencing-output-files" class="section level2">
<h2><span class="header-section-number">2.2</span> The sequencing output files</h2>
<ul>
<li>The typical output of a sequencing machine we will be working with are FASTA or FASTQ files for each sample. Each of these files are several gigbases large and contain millions of sequences, which we will call <strong>reads</strong>. For paired-end sequencing, there are two files for each sample, one for each end of the sequenced fragments.</li>
<li>The difference between a FASTA file and a FASTQ file, is that while FASTA files only store the results of base calls (sequences), FASTQ files also store the quality score of each base call (i.e., each called nucleotide), which can be useful in downstream analyses such as mapping or variant calling.</li>
<li>A FASTQ file contains four lines for each sequenced read:
<ol style="list-style-type: decimal">
<li>Sequence identifier line, starting with @.</li>
<li>The sequence.</li>
<li>Another sequence identifier line, now starting with +.</li>
<li>Quality scores.</li>
</ol></li>
</ul>
<div class="figure">
<img src="images_sequencing/fastqLine.png" alt="Figure: One read in a FASTQ file. Slide courtesy by Charlotte Soneson." width="5333" />
<p class="caption">
Figure: One read in a FASTQ file. Slide courtesy by Charlotte Soneson.
</p>
</div>
<p>As you’ll have noticed, the base call quality scores are encoded as ASCII characters for efficient storage. These ASCII characters can be converted into integers called Phred scores, which are logarithmically related to the probability of an erroneous base call.</p>
<hr />
<p>Many published papers upload their raw FASTQ-files on the Gene Expression Omnibus (GEO). If you’ll be working in transcriptomics, you will most likely have to download files from there. You can get the links manually, e.g., by following <a href="https://www.imm.ox.ac.uk/files/ccb/downloading_fastq_geo">this tutorial</a>, through <code>R</code> using custom packages, e.g., <a href="https://bioconductor.org/packages/release/bioc/html/GEOfastq.html">GEOfastq</a>, or you can use a command-line program like <a href="https://github.com/wwood/kingfisher-download">kingfisher</a> (recommended).</p>
</div>
</div>
<div id="preprocessing-of-raw-sequencing-data" class="section level1">
<h1><span class="header-section-number">3</span> Preprocessing of raw sequencing data</h1>
<p>After sequencing, we typically do a quality control (QC) check to verify the quality of the samples. During QC check, aberrant samples due to e.g. degraded mRNA can be detected.</p>
<p>The sequencing reads on their own contain a lot of information, but are most useful if we would be able to assign sequencing reads to genomic features (genes, exons, transcripts, etc.), i.e., for each sequencing read we will try to derive the (set of) feature(s) that could have plausibly produced the fragment through the process of gene expression. This process is called <strong>mapping</strong>. Most often we map reads to genes.</p>
<div class="figure">
<img src="images_sequencing/seqWorkflow2.png" alt="Figure: An updated sequencing workflow, including sequencing and mapping. Image adapted from Van den Berge et al. (2019)." width="1288" />
<p class="caption">
Figure: An updated sequencing workflow, including sequencing and mapping. Image adapted from Van den Berge et al. (2019).
</p>
</div>
<div id="quality-control" class="section level2">
<h2><span class="header-section-number">3.1</span> Quality control</h2>
<p>During quality control, diagnostic plots are created for each sample in order to determine its quality. The most popular QC tool for bulk RNA-seq data is <a href="https://www.bioinformatics.babraham.ac.uk/projects/fastqc/">FastQC</a>. If many samples are sequenced, then <a href="https://multiqc.info/">MultiQC</a> can be used to aggregate the QC checks across samples in a conveniently organized overview.</p>
<p>The FastQC website provides interesting example reports for us to look at and compare against. Here are example reports of <a href="https://www.bioinformatics.babraham.ac.uk/projects/fastqc/good_sequence_short_fastqc.html">high-quality Illumina data</a> and <a href="https://www.bioinformatics.babraham.ac.uk/projects/fastqc/bad_sequence_fastqc.html">low-quality Illumina data</a>.</p>
</div>
<div id="mapping" class="section level2">
<h2><span class="header-section-number">3.2</span> Mapping</h2>
<ul>
<li>Mapping is a critical step in the interpretation of RNA-seq data, where we are attributing reads to genomic features.</li>
<li>Allows us to measure how strong a feature such as a gene is expressed: the number of reads mapping to a gene serve as a proxy for how high that gene has been expressed in the sample.</li>
<li>While this opens the door to many opportunities, mapping is hard.</li>
<li>We are <strong>typically unable to assign each individual read uniquely</strong> to one specific gene; some reads cannot be unambiguously mapped and are compatible with multiple genes. These reads are said to be ‘multi-mapping’.</li>
</ul>
<p>Finally, a note on terminology. In this text we will use the words ‘read’ or ‘fragment’ (referring to the fragmented mRNA molecule being sequenced) to designate a datum, note that this could be either a single read (in single-end sequencing) or a read pair (in paired-end sequencing). The literature may also use these words interchangeably, although ‘fragment’ seems better at avoiding ambiguity between single-end reads and paired-end read pairs.</p>
<div id="reference-files" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Reference files</h3>
<ul>
<li>The alignment most often relies on a <strong>reference genome</strong> of the species, which can be considered a ‘representative example’ of the genome sequence of that species. Reference genomes are contiuously updated and released periodically.</li>
<li>Reference genomes can be freely downloaded from several providers, for example <a href="http://www.ensembl.org/info/data/ftp/index.html">Ensembl</a> or <a href="https://www.gencodegenes.org/human/">Gencode</a>.</li>
<li>Along with a reference genome, an annotation GFF or GTF file defines the coordinates of specific genomic features.</li>
<li>While here we will focus on reference-based alignment, i.e., alignment where a reference genome or transcriptome is available, note that a <em>de novo</em> construction of a reference transcriptome is also possible, where the reference may be constructed from the observed sequencing reads.</li>
</ul>
<div class="figure">
<img src="images_sequencing/referenceGenome.png" alt="Figure: A reference sequence of human chr1." width="787" />
<p class="caption">
Figure: A reference sequence of human chr1.
</p>
</div>
<div class="figure">
<img src="images_sequencing/gtfFile.png" alt="Figure: An example GTF file." width="1084" />
<p class="caption">
Figure: An example GTF file.
</p>
</div>
<ul>
<li>More recently, mapping of RNA-seq data occurs more often against a <strong>reference transcriptome</strong>, which is a reference file containing the sequences all known isoforms of a particular species, e.g., using <a href="https://www.nature.com/articles/nbt.3519">kallisto</a> or <a href="https://www.nature.com/articles/nmeth.4197">Salmon</a>.</li>
<li>The set of spliced transcripts is much smaller than the entire genome, and therefore mapping against a reference transcriptome is typically <strong>fast and memory efficient</strong>.</li>
<li>However, <a href="https://www.biorxiv.org/content/10.1101/2021.05.05.442755v1">it has been noted</a> that mapping against a reference transcriptome may also introduce spurious expression for genes that are not expressed. These observations can be explained by <strong>intronic reads</strong> that share some sequence similarity with transcripts, and could map to spliced transcript sequences. Recent methods, such as <a href="https://www.biorxiv.org/content/10.1101/2021.06.29.450377v1">alevin-fry</a>, avoid this by expanding the reference transcriptome to also include intronic sequences.</li>
</ul>
</div>
<div id="alignment-based-workflows" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Alignment-based workflows</h3>
<ul>
<li>Traditionally, alignment-based workflows have been used to map reads, where one tries to <strong>find the exact coordinates a read maps to</strong> on the reference genome or the reference transcriptome.</li>
<li>Note that due to alternative splicing, reads do not necessarily map contiguously on a reference genome, as a read can overlap with a splicing junction, where an intron has been excised. When mapping against a transcriptome, however, reads should be mapping contiguously.</li>
<li>A main challenge in spliced alignment against a reference genome is the proper alignment of reads that span a splice junction, especially when these junctions are not annotated a priori. Indeed, in spliced alignment reads can be split at any nucleotide, and the corresponding subsequences can map several thousands of basepairs apart. Meanwhile, the main challenge in unspliced alignment to a transcriptome is the redundant sequence among related transcripts in the transcriptome, which often leads to a high multi-mapping rate (i.e., reads that cannot be unambiguously assigned to a single transcript).</li>
<li>Spliced alignment against a genome is therefore computationally a much harder task. Since the transcript sequences are already spliced when aligning to a reference transcriptome, reads should align contiguously, and many of the computationally expensive steps and heuristics can be avoided, there.</li>
</ul>
<div class="figure">
<img src="images_sequencing/splicedAlignment.png" alt="Figure: Unspliced and spliced alignment. Figure from Van den Berge et al. (2019)." width="802" />
<p class="caption">
Figure: Unspliced and spliced alignment. Figure from Van den Berge et al. (2019).
</p>
</div>
</div>
<div id="alignment-free-workflows" class="section level3">
<h3><span class="header-section-number">3.2.3</span> Alignment-free workflows</h3>
<ul>
<li>Modern approaches <strong>avoid mapping each fragment individually</strong> (i.e., do not attempt to find the exact coordinates of a read’s origin), and instead posit a probabilistic model where <strong>transcript abundances are typically defined using its constituent <span class="math inline">\(k\)</span>-mers</strong>. These methods are sometimes referred to as <em>lightweight</em>.</li>
<li>A <span class="math inline">\(k\)</span>-mer is a short sequence of nucleotides of length <span class="math inline">\(k\)</span>. The space of possible <span class="math inline">\(k\)</span>-mers and the corresponding transcripts can be precomputed in advance using the reference transcriptome, providing a computational advantage as it only needs to be computed once.</li>
<li>For each fragment, the transcripts its <span class="math inline">\(k\)</span>-mers are compatible with is searched for using an indexed (efficiently searchable) transcriptome. The set of compatible transcripts is called the ‘<span class="math inline">\(k\)</span>-compatibility class’, ‘equivalence class’ or ‘transcript compatibility class’ of the fragment.</li>
</ul>
<div class="figure">
<img src="images_sequencing/kallisto_equivalenceClasses.png" alt="Figure: Overview of kallisto, image from Bray et al. (2016)." width="478" />
<p class="caption">
Figure: Overview of kallisto, image from Bray et al. (2016).
</p>
</div>
<div class="figure">
<img src="images_sequencing/kallisto_equivalenceClasses_caption.png" alt="Figure: Overview of kallisto, image from Bray et al. (2016)." width="538" />
<p class="caption">
Figure: Overview of kallisto, image from Bray et al. (2016).
</p>
</div>
</div>
</div>
<div id="abundance-quantification" class="section level2">
<h2><span class="header-section-number">3.3</span> Abundance quantification</h2>
<p>Given a set of mappings, using either alignment-based or alignment-free workflows, the estimation of expression of a gene/transcript/exon may occur in several ways.</p>
<p><strong>Counting</strong>:</p>
<ul>
<li>In alignment-based workflows, one could do a direct counting of fragments at, for instance, the gene level, counting the number fragments mapping to each gene. This has been the dominant approach for the first decade of RNA-seq data, often obtained using reference genome alignments.</li>
<li>Many heuristic choices need to be made: Do we count a fragment as soon as it intersects with the gene’s coordinates, or do we require the full fragment to map to the gene? Do we count intronic reads? Do we count multi-mapping reads?</li>
</ul>
<div class="figure">
<img src="images_sequencing/readCounting.png" alt="Figure: Gene- and exon-level read counting. Image adapted from Charlotte Soneson." width="2844" />
<p class="caption">
Figure: Gene- and exon-level read counting. Image adapted from Charlotte Soneson.
</p>
</div>
<p><strong>Estimation</strong>:</p>
<ul>
<li>Abundance quantification is more recently starting to shift from counting towards using statistical models to estimate the expression counts for a feature, which in this case is typically a transcript.</li>
<li>This approach is amenable to alignment-free workflows, since the number of fragments in each equivalence class are sufficient statistics for the abundance quantification, meaning that they contain all information needed to estimate the parameters of the statistical model, and hence the feature-level abundances. Since the expression counts in this case are estimated, they are not necessarily integer counts, and will be referred to as ‘estimated counts’.</li>
<li>In order to derive these, the EM-algorithm (<a href="https://www.jstor.org/stable/2984875">Dempster <em>et al.</em> (1977)</a>) is often used, although other approaches have been used by tools like Salmon. A big advantage of the estimation approach is that it <strong>probabilistically assigns fragments to transcripts, thereby automatically dealing with multi-mapping reads</strong>. The total number of fragments mapping to each transcript is then the sum of all fragment-level probabilities to be assigned to that respective transcript.</li>
</ul>
<div class="figure">
<img src="images_sequencing/abundanceEMAlgorithm.png" alt="Figure: Abundance quantification using the EM algorithm. Figure from Van den Berge et al. (2019)." width="1300" />
<p class="caption">
Figure: Abundance quantification using the EM algorithm. Figure from Van den Berge et al. (2019).
</p>
</div>
<div id="abundance-metrics" class="section level3">
<h3><span class="header-section-number">3.3.1</span> Abundance metrics</h3>
<ul>
<li>For simplicity, we have mainly been talking about feature-level counts as in sums of fragments. However, this is merely one metric that can be used as a proxy for expression, and several others exist.</li>
<li>Most of these were introduced to attempt to make the abundances more comparable across samples or features, as compared to the simple counts. These mainly serve to correct for technical biases such as transcript length and sequencing depth, both of which have significant impact on the observed counts.</li>
<li>Indeed, for a gene with the same mRNA concentration in two samples, sequencing one sample deeper, will on average result in a higher count.</li>
<li>Likewise, for two transcripts with the same mRNA concentration but different transcript lengths, one will tend to observe more fragments from the longer transcript due to the fragmentation step in the RNA-seq protocol, where longer transcripts can be split into more fragments of appropriate length.</li>
</ul>
<p>Below we introduce several relevant abundance metrics, but note that most data analysis methods we will discuss in this course will work with (estimated) counts. In what follows, let <span class="math inline">\(Y_{fi}\)</span> denote the random variable representing the expression counts of feature <span class="math inline">\(f\)</span> in sample <span class="math inline">\(i\)</span> (obtained either as a simple sum of fragments or estimated using lightweight approaches), and let <span class="math inline">\(N_i = \sum_f Y_{fi}\)</span> denote the sequencing depth (‘library size’) of sample <span class="math inline">\(i\)</span>.</p>
<ul>
<li><strong>Counts per million (CPM)</strong> are the counts one could expect to observe if the sample was sequenced to a depth of one million.</li>
</ul>
<p><span class="math display">\[ CPM_{fi} = \frac{Y_{fi}}{N_i} 10^6 \]</span></p>
<ul>
<li><strong>Transcripts per million (TPM)</strong> refers to the concentration or proportion of your feature in the sample. TPMs take into account the length of the feature, which is often reformulated into an <em>effective length</em> <span class="math inline">\(l_{fi}^{(eff)}\)</span>, relating to the number of possible start sites that a feature may have in order to generate fragments of a typical length observed in your dataset. This typical length is often calculated using the observed fragment length distribution from the data and defined as <span class="math display">\[ l_{fi}^{(eff)} = l_{f} - \hat{\bar{F}}_i + 1,\]</span> where <span class="math inline">\(l_{f}\)</span> is the total length of a feature in terms of number of nucleotides, and <span class="math inline">\(\hat{\bar{F}}_i\)</span> is the estimated average fragment length in sample <span class="math inline">\(i\)</span>. We can use this to define <span class="math display">\[ TPM_{fi} = \frac{Y_{fi}}{l_{fi}^{(eff)}} \left( \frac{1}{\sum_f \frac{Y_{fi}}{l_{fi}^{(eff)}}} \right) 10^6.\]</span> Note that the first part of the right-hand-side (RHS), <span class="math inline">\(\frac{Y_{fi}}{l_{fi}^{(eff)}}\)</span> is the expression counts normalized for the length of the feature. This measure, however, is still affected by the sequencing depth, which is then alleviated by dividing by the sum of the length-normalized counts across all features, i.e., <span class="math inline">\(\sum_f \frac{Y_{fi}}{l_{fi}^{(eff)}}\)</span>. TPMs hence normalize for the feature length as well as sequencing depth.</li>
</ul>
</div>
<div id="the-final-countdown" class="section level3">
<h3><span class="header-section-number">3.3.2</span> The final countdown</h3>
<p>Once abundances have been quantified, the (estimated) counts are typically stored in a count matrix, with genes spanning the rows and samples spanning the columns. This count matrix forms the basis of most downstream analyses to interpret RNA-seq data, and it will be the main object we will be working with in the following lectures.</p>
<div class="figure">
<img src="images_sequencing/seqWorkflow3.png" alt="Figure: An updated sequencing workflow. Image adapted from Van den Berge et al. (2019)." width="1291" />
<p class="caption">
Figure: An updated sequencing workflow. Image adapted from Van den Berge et al. (2019).
</p>
</div>
</div>
</div>
</div>
<div id="a-preprocessing-tutorial" class="section level1">
<h1><span class="header-section-number">4</span> A preprocessing tutorial</h1>
<p>The course GitHub repository contains code to download and quantify a sample from an RNA-seq dataset we will analyze later. Take a look at the code <a href="https://github.com/statOmics/SGA21/blob/master/sequencing_preprocessing.sh">here</a>, and try to run the code, which will require you to install several bioinformatics software tools, as mentioned in the file. If successful, you could try adapting the script in order to download and quantify all samples from that dataset.</p>
</div>
<div id="references" class="section level1">
<h1><span class="header-section-number">5</span> References</h1>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiSW50cm9kdWN0aW9uIHRvIHNlcXVlbmNpbmc6IFNlcXVlbmNpbmcgdGVjaG5vbG9neSBhbmQgcHJlcHJvY2Vzc2luZyBvZiBzZXF1ZW5jaW5nIGRhdGEiCmF1dGhvcjogIktvZW4gVmFuIGRlbiBCZXJnZSIKZGF0ZTogIkxhc3QgY29tcGlsZWQgb24gYHIgZm9ybWF0KFN5cy50aW1lKCksICclZCAlQiwgJVknKWAiCm91dHB1dDogCiAgaHRtbF9kb2N1bWVudDoKICAgIHRvYzogdHJ1ZQogICAgdG9jX2Zsb2F0OiB0cnVlCiAgcGRmX2RvY3VtZW50OgogICAgdG9jOiB0cnVlCiAgICBudW1iZXJfc2VjdGlvbnM6IHRydWUKICAgIGxhdGV4X2VuZ2luZTogeGVsYXRleAotLS0KCmBgYHtyIGZ1bmN0aW9ucywgaW5jbHVkZT1GQUxTRX0KIyBBIGZ1bmN0aW9uIGZvciBjYXB0aW9uaW5nIGFuZCByZWZlcmVuY2luZyBpbWFnZXMKZmlnIDwtIGxvY2FsKHsKICAgIGkgPC0gMAogICAgcmVmIDwtIGxpc3QoKQogICAgbGlzdCgKICAgICAgICBjYXA9ZnVuY3Rpb24ocmVmTmFtZSwgdGV4dCkgewogICAgICAgICAgICBpIDw8LSBpICsgMQogICAgICAgICAgICByZWZbW3JlZk5hbWVdXSA8PC0gaQogICAgICAgICAgICBwYXN0ZSgiRmlndXJlICIsIGksICI6ICIsIHRleHQsIHNlcD0iIikKICAgICAgICB9LAogICAgICAgIHJlZj1mdW5jdGlvbihyZWZOYW1lKSB7CiAgICAgICAgICAgIHJlZltbcmVmTmFtZV1dCiAgICAgICAgfSkKfSkKYGBgIAoKYGBge3IsIGVjaG89RkFMU0UsIGV2YWw9VFJVRX0Kc3VwcHJlc3NQYWNrYWdlU3RhcnR1cE1lc3NhZ2VzKHsKICBsaWJyYXJ5KGtuaXRyKQogIGxpYnJhcnkocm1hcmtkb3duKQogIGxpYnJhcnkoZ2dwbG90MikKfSkKYGBgCgojIFRoZSBzdHVkeSBvZiBnZW5lIGV4cHJlc3Npb24KCiAtIFRoZSBmaXJzdCBwYXJ0IG9mIHRoaXMgY291cnNlIGZvY3Vzc2VkIG9uIHByb3Rlb21pY3MsIHN0dWR5aW5nIHRoZSBjb25jZW50cmF0aW9uIG9mIHByb3RlaW5zIGluIGJpb2xvZ2ljYWwgc2FtcGxlcy4gV2UgaGF2ZSBzZWVuIHRoYXQgaWRlbnRpZmljYXRpb24gb2YgcHJvdGVpbnMgYW5kIG1lYXN1cmluZyB0aGVpciByZXNwZWN0aXZlIGNvbmNlbnRyYXRpb25zIGFyZSBleHRyZW1lbHkgY2hhbGxlbmdpbmcsIGxlYWRpbmcgdG8gbWFueSB0ZWNobm9sb2dpY2FsIGFuZCBzdGF0aXN0aWNhbCBjaGFsbGVuZ2VzIGluIG9yZGVyIHRvIGludGVycHJldCB0aGVzZSBkYXRhLgogLSBJbiB0aGUgc2Vjb25kIHBhcnQgb2YgdGhlIGNvdXJzZSwgd2Ugd2lsbCBmb2N1cyBvbiBtZWFzdXJpbmcgZ2VuZSBleHByZXNzaW9uLCBpLmUuLCBtZWFzdXJpbmcgdGhlIGNvbmNlbnRyYXRpb24gb2YgbVJOQSBtb2xlY3VsZXMsIHRoYXQgbWF5IGV2ZW50dWFsbHkgYmUgdHJhbnNsYXRlZCBpbnRvIHByb3RlaW5zLCBidXQgbWF5IGFsc28gaGF2ZSBmdW5jdGlvbnMgb24gdGhlaXIgb3duLgoKIyBTZXF1ZW5jaW5nIHRlY2hub2xvZ3kKCiAtIE1lYXN1cmluZyBtUk5BIG1vbGVjdWxlcyB0eXBpY2FsbHkgaGFwcGVucyB0aHJvdWdoIHNlcXVlbmNpbmcuCiAtIFRoZSB0ZWNobm9sb2d5IGNvbnRpbnVlcyB0byBldm9sdmUgYXQgYW4gaW5jcmVkaWJsZSBzcGVlZC4gVGhlIGRhdGEgb3V0cHV0IG9mIHNvLWNhbGxlZCBgbmV4dCBnZW5lcmF0aW9uJyBzZXF1ZW5jaW5nIG1hY2hpbmVzIGhhcyBtb3JlIHRoYW4gZG91YmxlZCBlYWNoIHllYXIhIFNpbXVsdGFuZW91c2x5LCB0aGUgY29zdCBvZiBzZXF1ZW5jaW5nIChpbiB0ZXJtcyBvZiAkIHBlciBHaWdhYmFzZSkgaXMgZHJvcHBpbmcuIEVhY2ggeWVhciwgd2UncmUgYWJsZSB0byBzZXF1ZW5jZSBtb3JlIGZvciBsZXNzIG1vbmV5LCBwcm92aWRpbmcgbW9yZSBpbmZvcm1hdGlvbiwgYXMgd2VsbCBhcyBhbHNvIGNvbXB1dGF0aW9uYWwgYW5kIHN0YXRpc3RpY2FsIGNoYWxsZW5nZXMuCiAtIFRoaXMgdHJlbWVuZG91cyB0ZWNobm9sb2dpY2FsIHJldm9sdXRpb24gaGFzIHJldm9sdXRpb25pemVkIGJpb2xvZ3ksIGFuZCBnZW5vbWljIHNlcXVlbmNpbmcgaXMgbm93IGEgY29yZSBjb21wb25lbnQgb2YgdGhlIG1vZGVybi1kYXkgYmlvbG9naXN0J3MgdG9vbGtpdC4KIC0gVGhlIGxhcmdlIG1ham9yaXR5IG9mIHNlcXVlbmNpbmcgZGF0YSBpcyBnZW5lcmF0ZWQgdXNpbmcgc2VxdWVuY2luZy1ieS1zeW50aGVzaXMgdXNpbmcgbWFjaGluZXMgcHJvZHVjZWQgYnkgdGhlIGNvbXBhbnkgSWxsdW1pbmEuIFdoaWxlIG5ldyBwbGF5ZXJzIHN1Y2ggYXMgUGFjaWZpYyBCaW9zY2llbmNlcyBhbmQgT3hmb3JkIE5hbm9wb3JlIGhhdmUgZW50ZXJlZCB0aGUgc2NlbmUsIHRoZXNlIGFyZSB0eXBpY2FsbHkgbW9zdCB1c2VmdWwgZm9yIChidXQgbm90IGxpbWl0ZWQgdG8pIEROQSBzZXF1ZW5jaW5nIHJhdGhlciB0aGFuIGdlbmUgZXhwcmVzc2lvbiBzdHVkaWVzLCBvd2luZyB0byB0aGVpciBjYXBhYmlsaXR5IG9mIHNlcXVlbmNpbmcgbG9uZyBtb2xlY3VsZXMuCgpgYGB7ciwgZWNobz1GQUxTRSwgZmlnLmNhcD1wYXN0ZSgiRmlndXJlOiBUaGUgZGF0YSBvdXRwdXQgcmV2b2x1dGlvbiBvZiBzZXF1ZW5jaW5nIG1hY2hpbmVzLiBJbWFnZSBmcm9tIElsbHVtaW5hIGRvY3VtZW50YXRpb24uIil9CiMgQWxsIGRlZmF1bHRzCmluY2x1ZGVfZ3JhcGhpY3MoIi4vaW1hZ2VzX3NlcXVlbmNpbmcvc2VxVGVjaG5vbG9neV90aHJvdWdocHV0LnBuZyIpCmBgYAoKIyMgVGhlIHNlcXVlbmNpbmcgd29ya2Zsb3cKCkxpYnJhcnkgcHJlcGFyYXRpb24gc3RlcHM6CgoxLiBGaXJzdCwgdGhlIGJpb2xvZ2ljYWwgKipzYW1wbGVzIG9mIGludGVyZXN0IGFyZSBjb2xsZWN0ZWQqKi4gT3dpbmcgdG8gdGhlIG1hdHVyaXR5IG9mIGRpZmZlcmVudCBwcm90b2NvbHMgZm9yIHNlcXVlbmNpbmcsIHNldmVyYWwgdHlwZXMgb2YgYmlvbG9naWNhbCBpbnB1dCBzYW1wbGVzIGFyZSBhbWVuYWJsZSB0byBzZXF1ZW5jaW5nLCBzdWNoIGFzIGZyb3plbiB0aXNzdWVzIG9yIEZGUEUtcHJlc2VydmVkIHNhbXBsZXMuCjIuIFRoZSAqKihtKVJOQSBtb2xlY3VsZXMgZnJvbSBvdXIgc2FtcGxlIGFyZSBjYXB0dXJlZCoqLiBUaGlzIHR5cGljYWxseSBpbnZvbHZlcyBjZWxsIGx5c2lzIGluIG9yZGVyIHRvIHJlbGVhc2UgdGhlIChtKVJOQSBtb2xlY3VsZXMgZnJvbSB3aXRoaW4gdGhlIGNlbGxzLiBUaGUgbVJOQSBtb2xlY3VsZXMgYXJlIG1vc3Qgb2Z0ZW4gY2FwdHVyZWQgdXNpbmcgKGkpIHBvbHlBLWNhcHR1cmUgdG8gc2VsZWN0IGZvciBwb2x5YWRlbnlsYXRlZCBSTkEsIG9yIChpaSkgcmlib3NvbWFsIGRlcGxldGlvbiwgd2hlcmUgcmlib3NvbWFsIGFuZCB0cmFuc2ZlciBSTkFzIGFyZSBkZXBsZXRlZCwgYW5kIHNvIGFsc28gbm9uLXBvbHlBLW1STkEgbW9sZWN1bGVzIG1heSBiZSBjYXB0dXJlZCwgc3VjaCBhcyBsb25nIG5vbi1jb2RpbmcgUk5Bcy4gSW4gdGhlIGNhc2Ugb2YgYHRhcmdldGVkIHNlcXVlbmNpbmcnLCB3aGVyZSByZWxldmFudCBtb2xlY3VsZXMgYXJlIG9mIG1haW4gaW50ZXJlc3QgKGUuZy4sIGEgZ2VuZSBwYW5lbCksIHRoZXNlIHRhcmdldHMgY2FuIGJlIHNwZWNpZmljYWxseSB0YXJnZXRlZCBpbiB0aGlzIHN0ZXAuCjMuICoqRnJhZ21lbnRhdGlvbioqIG9mIGNhcHR1cmVkIG1vbGVjdWxlcy4gVGhlIGNhcHR1cmVkIG1vbGVjdWxlcyBhcmUgZnJhZ21lbnRlZCwgZWl0aGVyIGNoZW1pY2FsbHkgb3IgbWVjaGFuaWNhbGx5LiBUaGUgYXBwcm9wcmlhdGUgc2l6ZSBvZiBmcmFnbWVudHMgZGVwZW5kcyBvbiB0aGUgc2VxdWVuY2luZyBtYWNoaW5lcywgYnV0IGlzIG9mdGVuIGluIHRoZSByYW5nZSBvZiAzMDAgLSA1MDBicC4KNC4gKipSZXZlcnNlIHRyYW5zY3JpcHRpb24qKi4gQ3VycmVudCBkb21pbmFudCBzZXF1ZW5jaW5nIG1hY2hpbmVzIG9ubHkgc2VxdWVuY2UgZG91YmxlLXN0cmFuZGVkIEROQSBtb2xlY3VsZXMuIFRoZXJlZm9yZSwgaW4gb3JkZXIgdG8gbWVhc3VyZSBzaW5nbGUtc3RyYW5kZWQgbVJOQSwgd2UgbXVzdCBmaXJzdCByZXZlcnNlIHRyYW5zY3JpYmUgdGhlc2UgbW9sZWN1bGVzIHRvIGEgZG91YmxlLXN0cmFuZGVkIGNvbXBsZW1lbnRhcnkgKGNETkEpIG1vbGVjdWxlLgo1LiAqKkFkYXB0ZXIgbGlnYXRpb24qKi4gQWRhcHRlcnMgYXJlIG9saWdvbnVjbGVvdGlkZXMgKHNob3J0IHNlcXVlbmNlcyBvZiBudWNsZW90aWRlcykgdGhhdCBhcmUgcGxhdGZvcm0tc3BlY2lmaWMgc2VxdWVuY2VzIGZvciBmcmFnbWVudCByZWNvZ25pdGlvbiBieSB0aGUgc2VxdWVuY2luZyBtYWNoaW5lcy4gVGhlc2UgYXJlIGFkZGVkIGVpdGhlciB0byB0aGUgMycgb3IgNScgZW5kIG9mIHRoZSBjRE5BIG1vbGVjdWxlcyBvciB1c2VkIGFzIHByaW1lcnMgaW4gdGhlIHJldmVyc2UgdHJhbnNjcmlwdGlvbiByZWFjdGlvbi4gVGhlIGZpbmFsIGNETkEgbGlicmFyeSBjb25zaXN0cyBvZiBjRE5BIGluc2VydHMgZmxhbmtlZCBieSBhbiBhZGFwdGVyIHNlcXVlbmNlIG9uIGVhY2ggZW5kLiAKNi4gKipQQ1IgYW1wbGlmaWNhdGlvbioqLiBUbyBpbmNyZWFzZSBjb25jZW50cmF0aW9uLCBzZXZlcmFsIFBDUiByZWFjdGlvbiBjeWNsZXMgYXJlIHBlcmZvcm1lZC4KNy4gTG9hZGluZyB0aGUgYW1wbGlmaWVkIGNETkEgbGlicmFyeSBvbiB0aGUgKipzZXF1ZW5jaW5nKiogbWFjaGluZS4gRmluZCBvdXQgaG93IHNlcXVlbmNpbmctYnktc3ludGhlc2lzIHdvcmtzIHRocm91Z2ggW3RoaXMgdmlkZW9dKGh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9ZkNkNkI1SFJhWjgpLiBOb3RlIHRoYXQgdGhlIHZpZGVvIHNob3dzIHBhaXJlZC1lbmQgc2VxdWVuY2luZywgd2hlcmUgYSBudW1iZXIgb2YgYmFzZXBhaXJzIGFyZSBzZXF1ZW5jZWQgYXQgZWFjaCBlbmQgb2YgdGhlIGZyYWdtZW50LiBBbGwgcHJldmlvdXMgc3RlcHMgdG9nZXRoZXIgYXJlIGRlc2NyaWJlZCBhcyBgc2FtcGxlIHByZXAnIGluIHRoYXQgdmlkZW8uCgpgYGB7ciwgZWNobz1GQUxTRSwgZmlnLmNhcD1wYXN0ZSgiRmlndXJlOiBUaGUgc2VxdWVuY2luZyB3b3JrZmxvdy4gSW1hZ2UgYWRhcHRlZCBmcm9tIFZhbiBkZW4gQmVyZ2UgZXQgYWwuICgyMDE5KS4iKX0KaW5jbHVkZV9ncmFwaGljcygiLi9pbWFnZXNfc2VxdWVuY2luZy9zZXFXb3JrZmxvdzFfY2xlYW4ucG5nIikKYGBgCgpOb3RlIHRoYXQgc2V2ZXJhbCB2YXJpYW50cyBvZiBsaWJyYXJ5IHByZXBhcmF0aW9uIHByb3RvY29scyBhcmUgYXZhaWxhYmxlLiBUaGUgbW9zdCBpbXBvcnRhbnQgb25lcyBhcmU6CgogLSBTaW5nbGUtZW5kIHZzIHBhaXJlZC1lbmQgc2VxdWVuY2luZzogSW4gc2luZ2xlLWVuZCBzZXF1ZW5jaW5nLCBhIHNpbmdsZSBlbmQgKDMnIG9yIDUnKSBvZiB0aGUgY0ROQSBmcmFnbWVudCBpcyBzZXF1ZW5jZWQuIEluIHBhaXJlZC1lbmQgc2VxdWVuY2luZywgYm90aCBlbmRzIGFyZSBzZXF1ZW5jZWQsIGFuZCBkZXBlbmRpbmcgb24gdGhlIHNpemUgb2YgdGhlIGZyYWdtZW50LCB0aGUgcmVhZHMgbWF5IG9yIG1heSBub3Qgb3ZlcmxhcC4KIC0gU3RyYW5kLXNwZWNpZmljIHByb3RvY29sczogU29tZSBsaWJyYXJ5IHByZXBhcmF0aW9uIHByb3RvY29scyBhbGxvdyBtZWFzdXJpbmcgc3RyYW5kIHNwZWNpZmljaXR5LCB3aGVyZSB0aGUgc3RyYW5kIGluZm9ybWF0aW9uIChpLmUuLCBzZW5zZS9hbnRpc2Vuc2UpIG9mIGVhY2ggcmVhZCBjYW4gYmUgcHJlc2VydmVkLgoKIyMgVGhlIHNlcXVlbmNpbmcgb3V0cHV0IGZpbGVzCgotIFRoZSB0eXBpY2FsIG91dHB1dCBvZiBhIHNlcXVlbmNpbmcgbWFjaGluZSB3ZSB3aWxsIGJlIHdvcmtpbmcgd2l0aCBhcmUgRkFTVEEgb3IgRkFTVFEgZmlsZXMgZm9yIGVhY2ggc2FtcGxlLiBFYWNoIG9mIHRoZXNlIGZpbGVzIGFyZSBzZXZlcmFsIGdpZ2Jhc2VzIGxhcmdlIGFuZCBjb250YWluIG1pbGxpb25zIG9mIHNlcXVlbmNlcywgd2hpY2ggd2Ugd2lsbCBjYWxsICoqcmVhZHMqKi4gRm9yIHBhaXJlZC1lbmQgc2VxdWVuY2luZywgdGhlcmUgYXJlIHR3byBmaWxlcyBmb3IgZWFjaCBzYW1wbGUsIG9uZSBmb3IgZWFjaCBlbmQgb2YgdGhlIHNlcXVlbmNlZCBmcmFnbWVudHMuCiAtIFRoZSBkaWZmZXJlbmNlIGJldHdlZW4gYSBGQVNUQSBmaWxlIGFuZCBhIEZBU1RRIGZpbGUsIGlzIHRoYXQgd2hpbGUgRkFTVEEgZmlsZXMgb25seSBzdG9yZSB0aGUgcmVzdWx0cyBvZiBiYXNlIGNhbGxzIChzZXF1ZW5jZXMpLCBGQVNUUSBmaWxlcyBhbHNvIHN0b3JlIHRoZSBxdWFsaXR5IHNjb3JlIG9mIGVhY2ggYmFzZSBjYWxsIChpLmUuLCBlYWNoIGNhbGxlZCBudWNsZW90aWRlKSwgd2hpY2ggY2FuIGJlIHVzZWZ1bCBpbiBkb3duc3RyZWFtIGFuYWx5c2VzIHN1Y2ggYXMgbWFwcGluZyBvciB2YXJpYW50IGNhbGxpbmcuCiAtIEEgRkFTVFEgZmlsZSBjb250YWlucyBmb3VyIGxpbmVzIGZvciBlYWNoIHNlcXVlbmNlZCByZWFkOgogICAgMS4gU2VxdWVuY2UgaWRlbnRpZmllciBsaW5lLCBzdGFydGluZyB3aXRoIEAuCiAgICAyLiBUaGUgc2VxdWVuY2UuCiAgICAzLiBBbm90aGVyIHNlcXVlbmNlIGlkZW50aWZpZXIgbGluZSwgbm93IHN0YXJ0aW5nIHdpdGggKy4KICAgIDQuIFF1YWxpdHkgc2NvcmVzLgoKYGBge3IsIGVjaG89RkFMU0UsIGZpZy5jYXA9cGFzdGUoIkZpZ3VyZTogT25lIHJlYWQgaW4gYSBGQVNUUSBmaWxlLiBTbGlkZSBjb3VydGVzeSBieSBDaGFybG90dGUgU29uZXNvbi4iKX0KaW5jbHVkZV9ncmFwaGljcygiLi9pbWFnZXNfc2VxdWVuY2luZy9mYXN0cUxpbmUucG5nIikKYGBgCgpBcyB5b3UnbGwgaGF2ZSBub3RpY2VkLCB0aGUgYmFzZSBjYWxsIHF1YWxpdHkgc2NvcmVzIGFyZSBlbmNvZGVkIGFzIEFTQ0lJIGNoYXJhY3RlcnMgZm9yIGVmZmljaWVudCBzdG9yYWdlLiBUaGVzZSBBU0NJSSBjaGFyYWN0ZXJzIGNhbiBiZSBjb252ZXJ0ZWQgaW50byBpbnRlZ2VycyBjYWxsZWQgUGhyZWQgc2NvcmVzLCB3aGljaCBhcmUgbG9nYXJpdGhtaWNhbGx5IHJlbGF0ZWQgdG8gdGhlIHByb2JhYmlsaXR5IG9mIGFuIGVycm9uZW91cyBiYXNlIGNhbGwuCgogLS0tCiAKTWFueSBwdWJsaXNoZWQgcGFwZXJzIHVwbG9hZCB0aGVpciByYXcgRkFTVFEtZmlsZXMgb24gdGhlIEdlbmUgRXhwcmVzc2lvbiBPbW5pYnVzIChHRU8pLiAKSWYgeW91J2xsIGJlIHdvcmtpbmcgaW4gdHJhbnNjcmlwdG9taWNzLCB5b3Ugd2lsbCBtb3N0IGxpa2VseSBoYXZlIHRvIGRvd25sb2FkIGZpbGVzIGZyb20gdGhlcmUuIFlvdSBjYW4gZ2V0IHRoZSBsaW5rcyBtYW51YWxseSwgZS5nLiwgYnkgZm9sbG93aW5nIFt0aGlzIHR1dG9yaWFsXShodHRwczovL3d3dy5pbW0ub3guYWMudWsvZmlsZXMvY2NiL2Rvd25sb2FkaW5nX2Zhc3RxX2dlbyksIHRocm91Z2ggYFJgIHVzaW5nIGN1c3RvbSBwYWNrYWdlcywgZS5nLiwgW0dFT2Zhc3RxXShodHRwczovL2Jpb2NvbmR1Y3Rvci5vcmcvcGFja2FnZXMvcmVsZWFzZS9iaW9jL2h0bWwvR0VPZmFzdHEuaHRtbCksIG9yIHlvdSBjYW4gdXNlIGEgY29tbWFuZC1saW5lIHByb2dyYW0gbGlrZSBba2luZ2Zpc2hlcl0oaHR0cHM6Ly9naXRodWIuY29tL3d3b29kL2tpbmdmaXNoZXItZG93bmxvYWQpIChyZWNvbW1lbmRlZCkuCgojIFByZXByb2Nlc3Npbmcgb2YgcmF3IHNlcXVlbmNpbmcgZGF0YQoKQWZ0ZXIgc2VxdWVuY2luZywgd2UgdHlwaWNhbGx5IGRvIGEgcXVhbGl0eSBjb250cm9sIChRQykgY2hlY2sgdG8gdmVyaWZ5IHRoZSBxdWFsaXR5IG9mIHRoZSBzYW1wbGVzLiBEdXJpbmcgUUMgY2hlY2ssIGFiZXJyYW50IHNhbXBsZXMgZHVlIHRvIGUuZy4gZGVncmFkZWQgbVJOQSBjYW4gYmUgZGV0ZWN0ZWQuCgpUaGUgc2VxdWVuY2luZyByZWFkcyBvbiB0aGVpciBvd24gY29udGFpbiBhIGxvdCBvZiBpbmZvcm1hdGlvbiwgYnV0IGFyZSBtb3N0IHVzZWZ1bCBpZiB3ZSB3b3VsZCBiZSBhYmxlIHRvIGFzc2lnbiBzZXF1ZW5jaW5nIHJlYWRzIHRvIGdlbm9taWMgZmVhdHVyZXMgKGdlbmVzLCBleG9ucywgdHJhbnNjcmlwdHMsIGV0Yy4pLCBpLmUuLCBmb3IgZWFjaCBzZXF1ZW5jaW5nIHJlYWQgd2Ugd2lsbCB0cnkgdG8gZGVyaXZlIHRoZSAoc2V0IG9mKSBmZWF0dXJlKHMpIHRoYXQgY291bGQgaGF2ZSBwbGF1c2libHkgcHJvZHVjZWQgdGhlIGZyYWdtZW50IHRocm91Z2ggdGhlIHByb2Nlc3Mgb2YgZ2VuZSBleHByZXNzaW9uLiBUaGlzIHByb2Nlc3MgaXMgY2FsbGVkICoqbWFwcGluZyoqLiBNb3N0IG9mdGVuIHdlIG1hcCByZWFkcyB0byBnZW5lcy4gCgpgYGB7ciwgZWNobz1GQUxTRSwgZmlnLmNhcD1wYXN0ZSgiRmlndXJlOiBBbiB1cGRhdGVkIHNlcXVlbmNpbmcgd29ya2Zsb3csIGluY2x1ZGluZyBzZXF1ZW5jaW5nIGFuZCBtYXBwaW5nLiBJbWFnZSBhZGFwdGVkIGZyb20gVmFuIGRlbiBCZXJnZSBldCBhbC4gKDIwMTkpLiIpfQppbmNsdWRlX2dyYXBoaWNzKCIuL2ltYWdlc19zZXF1ZW5jaW5nL3NlcVdvcmtmbG93Mi5wbmciKQpgYGAKCiMjIFF1YWxpdHkgY29udHJvbAoKRHVyaW5nIHF1YWxpdHkgY29udHJvbCwgZGlhZ25vc3RpYyBwbG90cyBhcmUgY3JlYXRlZCBmb3IgZWFjaCBzYW1wbGUgaW4gb3JkZXIgdG8gZGV0ZXJtaW5lIGl0cyBxdWFsaXR5LiBUaGUgbW9zdCBwb3B1bGFyIFFDIHRvb2wgZm9yIGJ1bGsgUk5BLXNlcSBkYXRhIGlzIFtGYXN0UUNdKGh0dHBzOi8vd3d3LmJpb2luZm9ybWF0aWNzLmJhYnJhaGFtLmFjLnVrL3Byb2plY3RzL2Zhc3RxYy8pLiBJZiBtYW55IHNhbXBsZXMgYXJlIHNlcXVlbmNlZCwgdGhlbiBbTXVsdGlRQ10oaHR0cHM6Ly9tdWx0aXFjLmluZm8vKSBjYW4gYmUgdXNlZCB0byBhZ2dyZWdhdGUgdGhlIFFDIGNoZWNrcyBhY3Jvc3Mgc2FtcGxlcyBpbiBhIGNvbnZlbmllbnRseSBvcmdhbml6ZWQgb3ZlcnZpZXcuCgpUaGUgRmFzdFFDIHdlYnNpdGUgcHJvdmlkZXMgaW50ZXJlc3RpbmcgZXhhbXBsZSByZXBvcnRzIGZvciB1cyB0byBsb29rIGF0IGFuZCBjb21wYXJlIGFnYWluc3QuIEhlcmUgYXJlIGV4YW1wbGUgcmVwb3J0cyBvZiBbaGlnaC1xdWFsaXR5IElsbHVtaW5hIGRhdGFdKGh0dHBzOi8vd3d3LmJpb2luZm9ybWF0aWNzLmJhYnJhaGFtLmFjLnVrL3Byb2plY3RzL2Zhc3RxYy9nb29kX3NlcXVlbmNlX3Nob3J0X2Zhc3RxYy5odG1sKSBhbmQgW2xvdy1xdWFsaXR5IElsbHVtaW5hIGRhdGFdKGh0dHBzOi8vd3d3LmJpb2luZm9ybWF0aWNzLmJhYnJhaGFtLmFjLnVrL3Byb2plY3RzL2Zhc3RxYy9iYWRfc2VxdWVuY2VfZmFzdHFjLmh0bWwpLgoKIyMgTWFwcGluZwoKIC0gTWFwcGluZyBpcyBhIGNyaXRpY2FsIHN0ZXAgaW4gdGhlIGludGVycHJldGF0aW9uIG9mIFJOQS1zZXEgZGF0YSwgd2hlcmUgd2UgYXJlIGF0dHJpYnV0aW5nIHJlYWRzIHRvIGdlbm9taWMgZmVhdHVyZXMuIAogLSBBbGxvd3MgdXMgdG8gbWVhc3VyZSBob3cgc3Ryb25nIGEgZmVhdHVyZSBzdWNoIGFzIGEgZ2VuZSBpcyBleHByZXNzZWQ6IHRoZSBudW1iZXIgb2YgcmVhZHMgbWFwcGluZyB0byBhIGdlbmUgc2VydmUgYXMgYSBwcm94eSBmb3IgaG93IGhpZ2ggdGhhdCBnZW5lIGhhcyBiZWVuIGV4cHJlc3NlZCBpbiB0aGUgc2FtcGxlLiAKIC0gV2hpbGUgdGhpcyBvcGVucyB0aGUgZG9vciB0byBtYW55IG9wcG9ydHVuaXRpZXMsIG1hcHBpbmcgaXMgaGFyZC4KIC0gV2UgYXJlICoqdHlwaWNhbGx5IHVuYWJsZSB0byBhc3NpZ24gZWFjaCBpbmRpdmlkdWFsIHJlYWQgdW5pcXVlbHkqKiB0byBvbmUgc3BlY2lmaWMgZ2VuZTsgc29tZSByZWFkcyBjYW5ub3QgYmUgdW5hbWJpZ3VvdXNseSBtYXBwZWQgYW5kIGFyZSBjb21wYXRpYmxlIHdpdGggbXVsdGlwbGUgZ2VuZXMuIFRoZXNlIHJlYWRzIGFyZSBzYWlkIHRvIGJlICdtdWx0aS1tYXBwaW5nJy4KIApGaW5hbGx5LCBhIG5vdGUgb24gdGVybWlub2xvZ3kuIEluIHRoaXMgdGV4dCB3ZSB3aWxsIHVzZSB0aGUgd29yZHMgJ3JlYWQnIG9yICdmcmFnbWVudCcgKHJlZmVycmluZyB0byB0aGUgZnJhZ21lbnRlZCBtUk5BIG1vbGVjdWxlIGJlaW5nIHNlcXVlbmNlZCkgdG8gZGVzaWduYXRlIGEgZGF0dW0sIG5vdGUgdGhhdCB0aGlzIGNvdWxkIGJlIGVpdGhlciBhIHNpbmdsZSByZWFkIChpbiBzaW5nbGUtZW5kIHNlcXVlbmNpbmcpIG9yIGEgcmVhZCBwYWlyIChpbiBwYWlyZWQtZW5kIHNlcXVlbmNpbmcpLiBUaGUgbGl0ZXJhdHVyZSBtYXkgYWxzbyB1c2UgdGhlc2Ugd29yZHMgaW50ZXJjaGFuZ2VhYmx5LCBhbHRob3VnaCAnZnJhZ21lbnQnIHNlZW1zIGJldHRlciBhdCBhdm9pZGluZyBhbWJpZ3VpdHkgYmV0d2VlbiBzaW5nbGUtZW5kIHJlYWRzIGFuZCBwYWlyZWQtZW5kIHJlYWQgcGFpcnMuCgojIyMgUmVmZXJlbmNlIGZpbGVzCgogLSBUaGUgYWxpZ25tZW50IG1vc3Qgb2Z0ZW4gcmVsaWVzIG9uIGEgKipyZWZlcmVuY2UgZ2Vub21lKiogb2YgdGhlIHNwZWNpZXMsIHdoaWNoIGNhbiBiZSBjb25zaWRlcmVkIGEgJ3JlcHJlc2VudGF0aXZlIGV4YW1wbGUnIG9mIHRoZSBnZW5vbWUgc2VxdWVuY2Ugb2YgdGhhdCBzcGVjaWVzLiBSZWZlcmVuY2UgZ2Vub21lcyBhcmUgY29udGl1b3VzbHkgdXBkYXRlZCBhbmQgcmVsZWFzZWQgcGVyaW9kaWNhbGx5LgogLSBSZWZlcmVuY2UgZ2Vub21lcyBjYW4gYmUgZnJlZWx5IGRvd25sb2FkZWQgZnJvbSBzZXZlcmFsIHByb3ZpZGVycywgZm9yIGV4YW1wbGUgW0Vuc2VtYmxdKGh0dHA6Ly93d3cuZW5zZW1ibC5vcmcvaW5mby9kYXRhL2Z0cC9pbmRleC5odG1sKSBvciBbR2VuY29kZV0oaHR0cHM6Ly93d3cuZ2VuY29kZWdlbmVzLm9yZy9odW1hbi8pLgogLSBBbG9uZyB3aXRoIGEgcmVmZXJlbmNlIGdlbm9tZSwgYW4gYW5ub3RhdGlvbiBHRkYgb3IgR1RGIGZpbGUgZGVmaW5lcyB0aGUgY29vcmRpbmF0ZXMgb2Ygc3BlY2lmaWMgZ2Vub21pYyBmZWF0dXJlcy4KIC0gV2hpbGUgaGVyZSB3ZSB3aWxsIGZvY3VzIG9uIHJlZmVyZW5jZS1iYXNlZCBhbGlnbm1lbnQsIGkuZS4sIGFsaWdubWVudCB3aGVyZSBhIHJlZmVyZW5jZSBnZW5vbWUgb3IgdHJhbnNjcmlwdG9tZSBpcyBhdmFpbGFibGUsIG5vdGUgdGhhdCBhICpkZSBub3ZvKiBjb25zdHJ1Y3Rpb24gb2YgYSByZWZlcmVuY2UgdHJhbnNjcmlwdG9tZSBpcyBhbHNvIHBvc3NpYmxlLCB3aGVyZSB0aGUgcmVmZXJlbmNlIG1heSBiZSBjb25zdHJ1Y3RlZCBmcm9tIHRoZSBvYnNlcnZlZCBzZXF1ZW5jaW5nIHJlYWRzLgogCmBgYHtyLCBlY2hvPUZBTFNFLCBmaWcuY2FwPXBhc3RlKCJGaWd1cmU6IEEgcmVmZXJlbmNlIHNlcXVlbmNlIG9mIGh1bWFuIGNocjEuIil9CmluY2x1ZGVfZ3JhcGhpY3MoIi4vaW1hZ2VzX3NlcXVlbmNpbmcvcmVmZXJlbmNlR2Vub21lLnBuZyIpCmBgYAoKYGBge3IsIGVjaG89RkFMU0UsIGZpZy5jYXA9cGFzdGUoIkZpZ3VyZTogQW4gZXhhbXBsZSBHVEYgZmlsZS4iKX0KaW5jbHVkZV9ncmFwaGljcygiLi9pbWFnZXNfc2VxdWVuY2luZy9ndGZGaWxlLnBuZyIpCmBgYAoKIC0gTW9yZSByZWNlbnRseSwgbWFwcGluZyBvZiBSTkEtc2VxIGRhdGEgb2NjdXJzIG1vcmUgb2Z0ZW4gYWdhaW5zdCBhICoqcmVmZXJlbmNlIHRyYW5zY3JpcHRvbWUqKiwgd2hpY2ggaXMgYSByZWZlcmVuY2UgZmlsZSBjb250YWluaW5nIHRoZSBzZXF1ZW5jZXMgYWxsIGtub3duIGlzb2Zvcm1zIG9mIGEgcGFydGljdWxhciBzcGVjaWVzLCBlLmcuLCB1c2luZyBba2FsbGlzdG9dKGh0dHBzOi8vd3d3Lm5hdHVyZS5jb20vYXJ0aWNsZXMvbmJ0LjM1MTkpIG9yIFtTYWxtb25dKGh0dHBzOi8vd3d3Lm5hdHVyZS5jb20vYXJ0aWNsZXMvbm1ldGguNDE5NykuCiAtIFRoZSBzZXQgb2Ygc3BsaWNlZCB0cmFuc2NyaXB0cyBpcyBtdWNoIHNtYWxsZXIgdGhhbiB0aGUgZW50aXJlIGdlbm9tZSwgYW5kIHRoZXJlZm9yZSBtYXBwaW5nIGFnYWluc3QgYSByZWZlcmVuY2UgdHJhbnNjcmlwdG9tZSBpcyB0eXBpY2FsbHkgKipmYXN0IGFuZCBtZW1vcnkgZWZmaWNpZW50KiouCiAtIEhvd2V2ZXIsIFtpdCBoYXMgYmVlbiBub3RlZF0oaHR0cHM6Ly93d3cuYmlvcnhpdi5vcmcvY29udGVudC8xMC4xMTAxLzIwMjEuMDUuMDUuNDQyNzU1djEpIHRoYXQgbWFwcGluZyBhZ2FpbnN0IGEgcmVmZXJlbmNlIHRyYW5zY3JpcHRvbWUgbWF5IGFsc28gaW50cm9kdWNlIHNwdXJpb3VzIGV4cHJlc3Npb24gZm9yIGdlbmVzIHRoYXQgYXJlIG5vdCBleHByZXNzZWQuIFRoZXNlIG9ic2VydmF0aW9ucyBjYW4gYmUgZXhwbGFpbmVkIGJ5ICoqaW50cm9uaWMgcmVhZHMqKiB0aGF0IHNoYXJlIHNvbWUgc2VxdWVuY2Ugc2ltaWxhcml0eSB3aXRoIHRyYW5zY3JpcHRzLCBhbmQgY291bGQgbWFwIHRvIHNwbGljZWQgdHJhbnNjcmlwdCBzZXF1ZW5jZXMuIFJlY2VudCBtZXRob2RzLCBzdWNoIGFzIFthbGV2aW4tZnJ5XShodHRwczovL3d3dy5iaW9yeGl2Lm9yZy9jb250ZW50LzEwLjExMDEvMjAyMS4wNi4yOS40NTAzNzd2MSksIGF2b2lkIHRoaXMgYnkgZXhwYW5kaW5nIHRoZSByZWZlcmVuY2UgdHJhbnNjcmlwdG9tZSB0byBhbHNvIGluY2x1ZGUgaW50cm9uaWMgc2VxdWVuY2VzLgoKIyMjIEFsaWdubWVudC1iYXNlZCB3b3JrZmxvd3MKCiAtIFRyYWRpdGlvbmFsbHksIGFsaWdubWVudC1iYXNlZCB3b3JrZmxvd3MgaGF2ZSBiZWVuIHVzZWQgdG8gbWFwIHJlYWRzLCB3aGVyZSBvbmUgdHJpZXMgdG8gKipmaW5kIHRoZSBleGFjdCBjb29yZGluYXRlcyBhIHJlYWQgbWFwcyB0byoqIG9uIHRoZSByZWZlcmVuY2UgZ2Vub21lIG9yIHRoZSByZWZlcmVuY2UgdHJhbnNjcmlwdG9tZS4KIC0gTm90ZSB0aGF0IGR1ZSB0byBhbHRlcm5hdGl2ZSBzcGxpY2luZywgcmVhZHMgZG8gbm90IG5lY2Vzc2FyaWx5IG1hcCBjb250aWd1b3VzbHkgb24gYSByZWZlcmVuY2UgZ2Vub21lLCBhcyBhIHJlYWQgY2FuIG92ZXJsYXAgd2l0aCBhIHNwbGljaW5nIGp1bmN0aW9uLCB3aGVyZSBhbiBpbnRyb24gaGFzIGJlZW4gZXhjaXNlZC4gV2hlbiBtYXBwaW5nIGFnYWluc3QgYSB0cmFuc2NyaXB0b21lLCBob3dldmVyLCByZWFkcyBzaG91bGQgYmUgbWFwcGluZyBjb250aWd1b3VzbHkuCiAgLSBBIG1haW4gY2hhbGxlbmdlIGluIHNwbGljZWQgYWxpZ25tZW50IGFnYWluc3QgYSByZWZlcmVuY2UgZ2Vub21lIGlzIHRoZSBwcm9wZXIgYWxpZ25tZW50IG9mIHJlYWRzIHRoYXQgc3BhbiBhIHNwbGljZSBqdW5jdGlvbiwgZXNwZWNpYWxseSB3aGVuIHRoZXNlIGp1bmN0aW9ucyBhcmUgbm90IGFubm90YXRlZCBhIHByaW9yaS4gSW5kZWVkLCBpbiBzcGxpY2VkIGFsaWdubWVudCByZWFkcyBjYW4gYmUgc3BsaXQgYXQgYW55IG51Y2xlb3RpZGUsIGFuZCB0aGUgY29ycmVzcG9uZGluZyBzdWJzZXF1ZW5jZXMgY2FuIG1hcCBzZXZlcmFsIHRob3VzYW5kcyBvZiBiYXNlcGFpcnMgYXBhcnQuIE1lYW53aGlsZSwgdGhlIG1haW4gY2hhbGxlbmdlIGluIHVuc3BsaWNlZCBhbGlnbm1lbnQgdG8gYSB0cmFuc2NyaXB0b21lIGlzIHRoZSByZWR1bmRhbnQgc2VxdWVuY2UgYW1vbmcgcmVsYXRlZCB0cmFuc2NyaXB0cyBpbiB0aGUgdHJhbnNjcmlwdG9tZSwgd2hpY2ggb2Z0ZW4gbGVhZHMgdG8gYSBoaWdoIG11bHRpLW1hcHBpbmcgcmF0ZSAoaS5lLiwgcmVhZHMgdGhhdCBjYW5ub3QgYmUgdW5hbWJpZ3VvdXNseSBhc3NpZ25lZCB0byBhIHNpbmdsZSB0cmFuc2NyaXB0KS4KIC0gU3BsaWNlZCBhbGlnbm1lbnQgYWdhaW5zdCBhIGdlbm9tZSBpcyB0aGVyZWZvcmUgY29tcHV0YXRpb25hbGx5IGEgbXVjaCBoYXJkZXIgdGFzay4gU2luY2UgdGhlIHRyYW5zY3JpcHQgc2VxdWVuY2VzIGFyZSBhbHJlYWR5IHNwbGljZWQgd2hlbiBhbGlnbmluZyB0byBhIHJlZmVyZW5jZSB0cmFuc2NyaXB0b21lLCByZWFkcyBzaG91bGQgYWxpZ24gY29udGlndW91c2x5LCBhbmQgbWFueSBvZiB0aGUgY29tcHV0YXRpb25hbGx5IGV4cGVuc2l2ZSBzdGVwcyBhbmQgaGV1cmlzdGljcyBjYW4gYmUgYXZvaWRlZCwgdGhlcmUuCgpgYGB7ciwgZWNobz1GQUxTRSwgZmlnLmNhcD1wYXN0ZSgiRmlndXJlOiBVbnNwbGljZWQgYW5kIHNwbGljZWQgYWxpZ25tZW50LiBGaWd1cmUgZnJvbSBWYW4gZGVuIEJlcmdlIGV0IGFsLiAoMjAxOSkuIil9CmluY2x1ZGVfZ3JhcGhpY3MoIi4vaW1hZ2VzX3NlcXVlbmNpbmcvc3BsaWNlZEFsaWdubWVudC5wbmciKQpgYGAKCiMjIyBBbGlnbm1lbnQtZnJlZSB3b3JrZmxvd3MKCiAtIE1vZGVybiBhcHByb2FjaGVzICoqYXZvaWQgbWFwcGluZyBlYWNoIGZyYWdtZW50IGluZGl2aWR1YWxseSoqIChpLmUuLCBkbyBub3QgYXR0ZW1wdCB0byBmaW5kIHRoZSBleGFjdCBjb29yZGluYXRlcyBvZiBhIHJlYWQncyBvcmlnaW4pLCBhbmQgaW5zdGVhZCBwb3NpdCBhIHByb2JhYmlsaXN0aWMgbW9kZWwgd2hlcmUgKip0cmFuc2NyaXB0IGFidW5kYW5jZXMgYXJlIHR5cGljYWxseSBkZWZpbmVkIHVzaW5nIGl0cyBjb25zdGl0dWVudCAkayQtbWVycyoqLiBUaGVzZSBtZXRob2RzIGFyZSBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgKmxpZ2h0d2VpZ2h0Ki4KIC0gQSAkayQtbWVyIGlzIGEgc2hvcnQgc2VxdWVuY2Ugb2YgbnVjbGVvdGlkZXMgb2YgbGVuZ3RoICRrJC4gVGhlIHNwYWNlIG9mIHBvc3NpYmxlICRrJC1tZXJzIGFuZCB0aGUgY29ycmVzcG9uZGluZyB0cmFuc2NyaXB0cyBjYW4gYmUgcHJlY29tcHV0ZWQgaW4gYWR2YW5jZSB1c2luZyB0aGUgcmVmZXJlbmNlIHRyYW5zY3JpcHRvbWUsIHByb3ZpZGluZyBhIGNvbXB1dGF0aW9uYWwgYWR2YW50YWdlIGFzIGl0IG9ubHkgbmVlZHMgdG8gYmUgY29tcHV0ZWQgb25jZS4KIC0gRm9yIGVhY2ggZnJhZ21lbnQsIHRoZSB0cmFuc2NyaXB0cyBpdHMgJGskLW1lcnMgYXJlIGNvbXBhdGlibGUgd2l0aCBpcyBzZWFyY2hlZCBmb3IgdXNpbmcgYW4gaW5kZXhlZCAoZWZmaWNpZW50bHkgc2VhcmNoYWJsZSkgdHJhbnNjcmlwdG9tZS4gVGhlIHNldCBvZiBjb21wYXRpYmxlIHRyYW5zY3JpcHRzIGlzIGNhbGxlZCB0aGUgJyRrJC1jb21wYXRpYmlsaXR5IGNsYXNzJywgJ2VxdWl2YWxlbmNlIGNsYXNzJyBvciAndHJhbnNjcmlwdCBjb21wYXRpYmlsaXR5IGNsYXNzJyBvZiB0aGUgZnJhZ21lbnQuCiAKYGBge3IsIGVjaG89RkFMU0UsIGZpZy5jYXA9cGFzdGUoIkZpZ3VyZTogT3ZlcnZpZXcgb2Yga2FsbGlzdG8sIGltYWdlIGZyb20gQnJheSBldCBhbC4gKDIwMTYpLiIpfQppbmNsdWRlX2dyYXBoaWNzKCIuL2ltYWdlc19zZXF1ZW5jaW5nL2thbGxpc3RvX2VxdWl2YWxlbmNlQ2xhc3Nlcy5wbmciKQppbmNsdWRlX2dyYXBoaWNzKCIuL2ltYWdlc19zZXF1ZW5jaW5nL2thbGxpc3RvX2VxdWl2YWxlbmNlQ2xhc3Nlc19jYXB0aW9uLnBuZyIpCmBgYAogCiMjIEFidW5kYW5jZSBxdWFudGlmaWNhdGlvbgoKR2l2ZW4gYSBzZXQgb2YgbWFwcGluZ3MsIHVzaW5nIGVpdGhlciBhbGlnbm1lbnQtYmFzZWQgb3IgYWxpZ25tZW50LWZyZWUgd29ya2Zsb3dzLCB0aGUgZXN0aW1hdGlvbiBvZiBleHByZXNzaW9uIG9mIGEgZ2VuZS90cmFuc2NyaXB0L2V4b24gbWF5IG9jY3VyIGluIHNldmVyYWwgd2F5cy4KCioqQ291bnRpbmcqKjoKCiAtIEluIGFsaWdubWVudC1iYXNlZCB3b3JrZmxvd3MsIG9uZSBjb3VsZCBkbyBhIGRpcmVjdCBjb3VudGluZyBvZiBmcmFnbWVudHMgYXQsIGZvciBpbnN0YW5jZSwgdGhlIGdlbmUgbGV2ZWwsIGNvdW50aW5nIHRoZSBudW1iZXIgZnJhZ21lbnRzIG1hcHBpbmcgdG8gZWFjaCBnZW5lLiBUaGlzIGhhcyBiZWVuIHRoZSBkb21pbmFudCBhcHByb2FjaCBmb3IgdGhlIGZpcnN0IGRlY2FkZSBvZiBSTkEtc2VxIGRhdGEsIG9mdGVuIG9idGFpbmVkIHVzaW5nIHJlZmVyZW5jZSBnZW5vbWUgYWxpZ25tZW50cy4gCiAtIE1hbnkgaGV1cmlzdGljIGNob2ljZXMgbmVlZCB0byBiZSBtYWRlOiBEbyB3ZSBjb3VudCBhIGZyYWdtZW50IGFzIHNvb24gYXMgaXQgaW50ZXJzZWN0cyB3aXRoIHRoZSBnZW5lJ3MgY29vcmRpbmF0ZXMsIG9yIGRvIHdlIHJlcXVpcmUgdGhlIGZ1bGwgZnJhZ21lbnQgdG8gbWFwIHRvIHRoZSBnZW5lPyBEbyB3ZSBjb3VudCBpbnRyb25pYyByZWFkcz8gRG8gd2UgY291bnQgbXVsdGktbWFwcGluZyByZWFkcz8KIApgYGB7ciwgZWNobz1GQUxTRSwgZmlnLmNhcD1wYXN0ZSgiRmlndXJlOiBHZW5lLSBhbmQgZXhvbi1sZXZlbCByZWFkIGNvdW50aW5nLiBJbWFnZSBhZGFwdGVkIGZyb20gQ2hhcmxvdHRlIFNvbmVzb24uIil9CmluY2x1ZGVfZ3JhcGhpY3MoIi4vaW1hZ2VzX3NlcXVlbmNpbmcvcmVhZENvdW50aW5nLnBuZyIpCmBgYAogCioqRXN0aW1hdGlvbioqOiAKIAogLSBBYnVuZGFuY2UgcXVhbnRpZmljYXRpb24gaXMgbW9yZSByZWNlbnRseSBzdGFydGluZyB0byBzaGlmdCBmcm9tIGNvdW50aW5nIHRvd2FyZHMgdXNpbmcgc3RhdGlzdGljYWwgbW9kZWxzIHRvIGVzdGltYXRlIHRoZSBleHByZXNzaW9uIGNvdW50cyBmb3IgYSBmZWF0dXJlLCB3aGljaCBpbiB0aGlzIGNhc2UgaXMgdHlwaWNhbGx5IGEgdHJhbnNjcmlwdC4gCiAtIFRoaXMgYXBwcm9hY2ggaXMgYW1lbmFibGUgdG8gYWxpZ25tZW50LWZyZWUgd29ya2Zsb3dzLCBzaW5jZSB0aGUgbnVtYmVyIG9mIGZyYWdtZW50cyBpbiBlYWNoIGVxdWl2YWxlbmNlIGNsYXNzIGFyZSBzdWZmaWNpZW50IHN0YXRpc3RpY3MgZm9yIHRoZSBhYnVuZGFuY2UgcXVhbnRpZmljYXRpb24sIG1lYW5pbmcgdGhhdCB0aGV5IGNvbnRhaW4gYWxsIGluZm9ybWF0aW9uIG5lZWRlZCB0byBlc3RpbWF0ZSB0aGUgcGFyYW1ldGVycyBvZiB0aGUgc3RhdGlzdGljYWwgbW9kZWwsIGFuZCBoZW5jZSB0aGUgZmVhdHVyZS1sZXZlbCBhYnVuZGFuY2VzLiBTaW5jZSB0aGUgZXhwcmVzc2lvbiBjb3VudHMgaW4gdGhpcyBjYXNlIGFyZSBlc3RpbWF0ZWQsIHRoZXkgYXJlIG5vdCBuZWNlc3NhcmlseSBpbnRlZ2VyIGNvdW50cywgYW5kIHdpbGwgYmUgcmVmZXJyZWQgdG8gYXMgJ2VzdGltYXRlZCBjb3VudHMnLiAKIC0gSW4gb3JkZXIgdG8gZGVyaXZlIHRoZXNlLCB0aGUgRU0tYWxnb3JpdGhtIChbRGVtcHN0ZXIgKmV0IGFsLiogKDE5NzcpXShodHRwczovL3d3dy5qc3Rvci5vcmcvc3RhYmxlLzI5ODQ4NzUpKSBpcyBvZnRlbiB1c2VkLCBhbHRob3VnaCBvdGhlciBhcHByb2FjaGVzIGhhdmUgYmVlbiB1c2VkIGJ5IHRvb2xzIGxpa2UgU2FsbW9uLiBBIGJpZyBhZHZhbnRhZ2Ugb2YgdGhlIGVzdGltYXRpb24gYXBwcm9hY2ggaXMgdGhhdCBpdCAqKnByb2JhYmlsaXN0aWNhbGx5IGFzc2lnbnMgZnJhZ21lbnRzIHRvIHRyYW5zY3JpcHRzLCB0aGVyZWJ5IGF1dG9tYXRpY2FsbHkgZGVhbGluZyB3aXRoIG11bHRpLW1hcHBpbmcgcmVhZHMqKi4gVGhlIHRvdGFsIG51bWJlciBvZiBmcmFnbWVudHMgbWFwcGluZyB0byBlYWNoIHRyYW5zY3JpcHQgaXMgdGhlbiB0aGUgc3VtIG9mIGFsbCBmcmFnbWVudC1sZXZlbCBwcm9iYWJpbGl0aWVzIHRvIGJlIGFzc2lnbmVkIHRvIHRoYXQgcmVzcGVjdGl2ZSB0cmFuc2NyaXB0LgogCmBgYHtyLCBlY2hvPUZBTFNFLCBmaWcuY2FwPXBhc3RlKCJGaWd1cmU6IEFidW5kYW5jZSBxdWFudGlmaWNhdGlvbiB1c2luZyB0aGUgRU0gYWxnb3JpdGhtLiBGaWd1cmUgZnJvbSBWYW4gZGVuIEJlcmdlIGV0IGFsLiAoMjAxOSkuIil9CmluY2x1ZGVfZ3JhcGhpY3MoIi4vaW1hZ2VzX3NlcXVlbmNpbmcvYWJ1bmRhbmNlRU1BbGdvcml0aG0ucG5nIikKYGBgCgojIyMgQWJ1bmRhbmNlIG1ldHJpY3MKCiAtIEZvciBzaW1wbGljaXR5LCB3ZSBoYXZlIG1haW5seSBiZWVuIHRhbGtpbmcgYWJvdXQgZmVhdHVyZS1sZXZlbCBjb3VudHMgYXMgaW4gc3VtcyBvZiBmcmFnbWVudHMuIEhvd2V2ZXIsIHRoaXMgaXMgbWVyZWx5IG9uZSBtZXRyaWMgdGhhdCBjYW4gYmUgdXNlZCBhcyBhIHByb3h5IGZvciBleHByZXNzaW9uLCBhbmQgc2V2ZXJhbCBvdGhlcnMgZXhpc3QuIAogLSBNb3N0IG9mIHRoZXNlIHdlcmUgaW50cm9kdWNlZCB0byBhdHRlbXB0IHRvIG1ha2UgdGhlIGFidW5kYW5jZXMgbW9yZSBjb21wYXJhYmxlIGFjcm9zcyBzYW1wbGVzIG9yIGZlYXR1cmVzLCBhcyBjb21wYXJlZCB0byB0aGUgc2ltcGxlIGNvdW50cy4gVGhlc2UgbWFpbmx5IHNlcnZlIHRvIGNvcnJlY3QgZm9yIHRlY2huaWNhbCBiaWFzZXMgc3VjaCBhcyB0cmFuc2NyaXB0IGxlbmd0aCBhbmQgc2VxdWVuY2luZyBkZXB0aCwgYm90aCBvZiB3aGljaCBoYXZlIHNpZ25pZmljYW50IGltcGFjdCBvbiB0aGUgb2JzZXJ2ZWQgY291bnRzLiAKICAtIEluZGVlZCwgZm9yIGEgZ2VuZSB3aXRoIHRoZSBzYW1lIG1STkEgY29uY2VudHJhdGlvbiBpbiB0d28gc2FtcGxlcywgc2VxdWVuY2luZyBvbmUgc2FtcGxlIGRlZXBlciwgd2lsbCBvbiBhdmVyYWdlIHJlc3VsdCBpbiBhIGhpZ2hlciBjb3VudC4gCiAgLSBMaWtld2lzZSwgZm9yIHR3byB0cmFuc2NyaXB0cyB3aXRoIHRoZSBzYW1lIG1STkEgY29uY2VudHJhdGlvbiBidXQgZGlmZmVyZW50IHRyYW5zY3JpcHQgbGVuZ3Rocywgb25lIHdpbGwgdGVuZCB0byBvYnNlcnZlIG1vcmUgZnJhZ21lbnRzIGZyb20gdGhlIGxvbmdlciB0cmFuc2NyaXB0IGR1ZSB0byB0aGUgZnJhZ21lbnRhdGlvbiBzdGVwIGluIHRoZSBSTkEtc2VxIHByb3RvY29sLCB3aGVyZSBsb25nZXIgdHJhbnNjcmlwdHMgY2FuIGJlIHNwbGl0IGludG8gbW9yZSBmcmFnbWVudHMgb2YgYXBwcm9wcmlhdGUgbGVuZ3RoLgoKCkJlbG93IHdlIGludHJvZHVjZSBzZXZlcmFsIHJlbGV2YW50IGFidW5kYW5jZSBtZXRyaWNzLCBidXQgbm90ZSB0aGF0IG1vc3QgZGF0YSBhbmFseXNpcyBtZXRob2RzIHdlIHdpbGwgZGlzY3VzcyBpbiB0aGlzIGNvdXJzZSB3aWxsIHdvcmsgd2l0aCAoZXN0aW1hdGVkKSBjb3VudHMuIEluIHdoYXQgZm9sbG93cywgbGV0ICRZX3tmaX0kIGRlbm90ZSB0aGUgcmFuZG9tIHZhcmlhYmxlIHJlcHJlc2VudGluZyB0aGUgZXhwcmVzc2lvbiBjb3VudHMgb2YgZmVhdHVyZSAkZiQgaW4gc2FtcGxlICRpJCAob2J0YWluZWQgZWl0aGVyIGFzIGEgc2ltcGxlIHN1bSBvZiBmcmFnbWVudHMgb3IgZXN0aW1hdGVkIHVzaW5nIGxpZ2h0d2VpZ2h0IGFwcHJvYWNoZXMpLCBhbmQgbGV0ICROX2kgPSBcc3VtX2YgWV97Zml9JCBkZW5vdGUgdGhlIHNlcXVlbmNpbmcgZGVwdGggKCdsaWJyYXJ5IHNpemUnKSBvZiBzYW1wbGUgJGkkLgoKICogKipDb3VudHMgcGVyIG1pbGxpb24gKENQTSkqKiBhcmUgdGhlIGNvdW50cyBvbmUgY291bGQgZXhwZWN0IHRvIG9ic2VydmUgaWYgdGhlIHNhbXBsZSB3YXMgc2VxdWVuY2VkIHRvIGEgZGVwdGggb2Ygb25lIG1pbGxpb24uCiAKXFsgQ1BNX3tmaX0gPSBcZnJhY3tZX3tmaX19e05faX0gMTBeNiBcXQoKICogKipUcmFuc2NyaXB0cyBwZXIgbWlsbGlvbiAoVFBNKSoqIHJlZmVycyB0byB0aGUgY29uY2VudHJhdGlvbiBvciBwcm9wb3J0aW9uIG9mIHlvdXIgZmVhdHVyZSBpbiB0aGUgc2FtcGxlLiBUUE1zIHRha2UgaW50byBhY2NvdW50IHRoZSBsZW5ndGggb2YgdGhlIGZlYXR1cmUsIHdoaWNoIGlzIG9mdGVuIHJlZm9ybXVsYXRlZCBpbnRvIGFuICplZmZlY3RpdmUgbGVuZ3RoKiAkbF97Zml9XnsoZWZmKX0kLCByZWxhdGluZyB0byB0aGUgbnVtYmVyIG9mIHBvc3NpYmxlIHN0YXJ0IHNpdGVzIHRoYXQgYSBmZWF0dXJlIG1heSBoYXZlIGluIG9yZGVyIHRvIGdlbmVyYXRlIGZyYWdtZW50cyBvZiBhIHR5cGljYWwgbGVuZ3RoIG9ic2VydmVkIGluIHlvdXIgZGF0YXNldC4gVGhpcyB0eXBpY2FsIGxlbmd0aCBpcyBvZnRlbiBjYWxjdWxhdGVkIHVzaW5nIHRoZSBvYnNlcnZlZCBmcmFnbWVudCBsZW5ndGggZGlzdHJpYnV0aW9uIGZyb20gdGhlIGRhdGEgYW5kIGRlZmluZWQgYXMgJCQgbF97Zml9XnsoZWZmKX0gPSBsX3tmfSAtIFxoYXR7XGJhcntGfX1faSArIDEsJCQgd2hlcmUgJGxfe2Z9JCBpcyB0aGUgdG90YWwgbGVuZ3RoIG9mIGEgZmVhdHVyZSBpbiB0ZXJtcyBvZiBudW1iZXIgb2YgbnVjbGVvdGlkZXMsIGFuZCAkXGhhdHtcYmFye0Z9fV9pJCBpcyB0aGUgZXN0aW1hdGVkIGF2ZXJhZ2UgZnJhZ21lbnQgbGVuZ3RoIGluIHNhbXBsZSAkaSQuIFdlIGNhbiB1c2UgdGhpcyB0byBkZWZpbmUgJCQgVFBNX3tmaX0gPSBcZnJhY3tZX3tmaX19e2xfe2ZpfV57KGVmZil9fSBcbGVmdCggXGZyYWN7MX17XHN1bV9mIFxmcmFje1lfe2ZpfX17bF97Zml9XnsoZWZmKX19fSBccmlnaHQpIDEwXjYuJCQgTm90ZSB0aGF0IHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSByaWdodC1oYW5kLXNpZGUgKFJIUyksICRcZnJhY3tZX3tmaX19e2xfe2ZpfV57KGVmZil9fSQgaXMgdGhlIGV4cHJlc3Npb24gY291bnRzIG5vcm1hbGl6ZWQgZm9yIHRoZSBsZW5ndGggb2YgdGhlIGZlYXR1cmUuIFRoaXMgbWVhc3VyZSwgaG93ZXZlciwgaXMgc3RpbGwgYWZmZWN0ZWQgYnkgdGhlIHNlcXVlbmNpbmcgZGVwdGgsIHdoaWNoIGlzIHRoZW4gYWxsZXZpYXRlZCBieSBkaXZpZGluZyBieSB0aGUgc3VtIG9mIHRoZSBsZW5ndGgtbm9ybWFsaXplZCBjb3VudHMgYWNyb3NzIGFsbCBmZWF0dXJlcywgaS5lLiwgJFxzdW1fZiBcZnJhY3tZX3tmaX19e2xfe2ZpfV57KGVmZil9fSQuIFRQTXMgaGVuY2Ugbm9ybWFsaXplIGZvciB0aGUgZmVhdHVyZSBsZW5ndGggYXMgd2VsbCBhcyBzZXF1ZW5jaW5nIGRlcHRoLgoKIyMjIFRoZSBmaW5hbCBjb3VudGRvd24KCk9uY2UgYWJ1bmRhbmNlcyBoYXZlIGJlZW4gcXVhbnRpZmllZCwgdGhlIChlc3RpbWF0ZWQpIGNvdW50cyBhcmUgdHlwaWNhbGx5IHN0b3JlZCBpbiBhIGNvdW50IG1hdHJpeCwgd2l0aCBnZW5lcyBzcGFubmluZyB0aGUgcm93cyBhbmQgc2FtcGxlcyBzcGFubmluZyB0aGUgY29sdW1ucy4gVGhpcyBjb3VudCBtYXRyaXggZm9ybXMgdGhlIGJhc2lzIG9mIG1vc3QgZG93bnN0cmVhbSBhbmFseXNlcyB0byBpbnRlcnByZXQgUk5BLXNlcSBkYXRhLCBhbmQgaXQgd2lsbCBiZSB0aGUgbWFpbiBvYmplY3Qgd2Ugd2lsbCBiZSB3b3JraW5nIHdpdGggaW4gdGhlIGZvbGxvd2luZyBsZWN0dXJlcy4KCgpgYGB7ciwgZWNobz1GQUxTRSwgZmlnLmNhcD1wYXN0ZSgiRmlndXJlOiBBbiB1cGRhdGVkIHNlcXVlbmNpbmcgd29ya2Zsb3cuIEltYWdlIGFkYXB0ZWQgZnJvbSBWYW4gZGVuIEJlcmdlIGV0IGFsLiAoMjAxOSkuIil9CmluY2x1ZGVfZ3JhcGhpY3MoIi4vaW1hZ2VzX3NlcXVlbmNpbmcvc2VxV29ya2Zsb3czLnBuZyIpCmBgYAoKIyBBIHByZXByb2Nlc3NpbmcgdHV0b3JpYWwKClRoZSBjb3Vyc2UgR2l0SHViIHJlcG9zaXRvcnkgY29udGFpbnMgY29kZSB0byBkb3dubG9hZCBhbmQgcXVhbnRpZnkgYSBzYW1wbGUgZnJvbSBhbiBSTkEtc2VxIGRhdGFzZXQgd2Ugd2lsbCBhbmFseXplIGxhdGVyLiBUYWtlIGEgbG9vayBhdCB0aGUgY29kZSBbaGVyZV0oaHR0cHM6Ly9naXRodWIuY29tL3N0YXRPbWljcy9TR0EyMS9ibG9iL21hc3Rlci9zZXF1ZW5jaW5nX3ByZXByb2Nlc3Npbmcuc2gpLCBhbmQgdHJ5IHRvIHJ1biB0aGUgY29kZSwgd2hpY2ggd2lsbCByZXF1aXJlIHlvdSB0byBpbnN0YWxsIHNldmVyYWwgYmlvaW5mb3JtYXRpY3Mgc29mdHdhcmUgdG9vbHMsIGFzIG1lbnRpb25lZCBpbiB0aGUgZmlsZS4KSWYgc3VjY2Vzc2Z1bCwgeW91IGNvdWxkIHRyeSBhZGFwdGluZyB0aGUgc2NyaXB0IGluIG9yZGVyIHRvIGRvd25sb2FkIGFuZCBxdWFudGlmeSBhbGwgc2FtcGxlcyBmcm9tIHRoYXQgZGF0YXNldC4KCiMgUmVmZXJlbmNlcwoKCg==</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("sequencing_intro.Rmd");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
